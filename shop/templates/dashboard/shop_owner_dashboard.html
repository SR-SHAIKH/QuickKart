{% extends 'base.html' %}
{% block title %}Shop Owner Dashboard{% endblock %}
{% block content %}

<div class="mb-4">
  <h2 class="fw-bold mb-3">ðŸ‘‹ Welcome, {{ request.user.get_full_name|default:request.user.email }}</h2>

  <div class="d-flex flex-wrap gap-3 mb-4">
    <a href="{% url 'create_product' %}" class="btn btn-success">
      <i class="bi bi-plus-circle me-1"></i> Add New Product
    </a>
    <a href="{% url 'shop_owner_orders' %}" class="btn btn-primary">
      <i class="bi bi-receipt me-1"></i> View Orders
    </a>
  </div>

  <div class="card shadow-sm">
    <div class="card-header bg-success text-white fw-semibold">
      <i class="bi bi-box-seam me-2"></i> Your Products
    </div>

    <div class="card-body p-0">
      {% if products %}
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle mb-0">
          <thead class="table-success">
            <tr>
              <th scope="col">Image</th>
              <th scope="col">Product</th>
              <th scope="col">Price</th>
              <th scope="col" class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for product in products %}
            <tr>
              <td style="width: 100px;">
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid rounded" style="height: 60px; width: auto;" />
              </td>
              <td>
                <a href="{% url 'shop_product_detail' product.id %}" class="text-decoration-none fw-medium">
                  {{ product.name }}
                </a>
              </td>
              <td class="text-success fw-semibold">â‚¹{{ product.price }}</td>
              <td class="text-center">
                <div class="mt-2 px-2 pb-2">
  <div class="d-flex flex-column gap-2">
    <a href="{% url 'edit_product' product.id %}" class="btn btn-warning btn-sm w-100 d-flex justify-content-center align-items-center" style="height: 38px;">
      <i class="bi bi-pencil me-1"></i> Edit
    </a>
    <form method="POST" action="{% url 'delete_product' product.id %}">
      {% csrf_token %}
      <button type="submit" class="btn btn-danger btn-sm w-100 d-flex justify-content-center align-items-center" style="height: 38px;">
        <i class="bi bi-trash me-1"></i> Delete
      </button>
    </form>
  </div>
</div>



              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
        <p class="p-4 text-muted">You haven't added any products yet.</p>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
